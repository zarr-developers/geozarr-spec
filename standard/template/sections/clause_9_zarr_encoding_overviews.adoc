
=== Encoding of Multiscale Overviews in Zarr

This clause specifies how Overviews should be encoded in Zarr-based datasets conforming to the GeoZarr data model.

The *Overviews* construct follows the same encoding principles defined for the Common Data Model (CDM) when represented in Zarr.
Because overviews are defined purely at the CDM level through groups, variables, and attributes, no Zarr-specific structural extensions are introduced.

Each *OverviewSet* is encoded as a Zarr *group*, containing multiple *OverviewLevel* subgroups.
The parent group includes the `multiscales` attribute, which declares the hierarchy and relationships between levels.
Each *OverviewLevel* is implemented as a standard Zarr group containing variables (arrays) and coordinate variables, encoded identically to other CDM variables.

==== Relationship to Core CDM Encoding

The encoding of overviews reuses the same mapping rules established in the core data model encoding:

- **Groups** map to Zarr directories with `.zgroup`/`.zattrs` (Zarr v2) or `zarr.json` (Zarr v3, with `"node_type": "group"`).
- **Variables** map to Zarr arrays with `.zarray` and `.zattrs` (Zarr v2) or `"node_type": "array"` entries in `zarr.json` (Zarr v3).
- **Attributes** (including `multiscales`) are stored in `.zattrs` (Zarr v2) or under the `"attributes"` field in `zarr.json` (Zarr v3).

==== Example Encoding (Zarr v3)

[source,json]
----
{
  "zarr_format": 3,
  "node_type": "group",
  "attributes": {
    "multiscales": {
      "version": "1.0",
      "resampling_method": "average",
      "layout": [
        {"id": "L0", "path": "L0"},
        {"id": "L1", "path": "L1", "derived_from": "L0", "factors": [2, 2]},
        {"id": "L2", "path": "L2", "derived_from": "L1", "factors": [2, 2]}
      ]
    },
    "spatial_ref": "EPSG:32633"
  },
  "metadata": {
    "title": "Reflectance Multiscale Example"
  }
}
----

Child groups represent the overview levels:

```

reflectance/
├── zarr.json                      # OverviewSet metadata (includes "multiscales")
├── L0/
│   ├── zarr.json                  # Highest or nominal resolution
│   ├── b01/
│   ├── b02/
│   ├── x/
│   └── y/
├── L1/
│   ├── zarr.json
│   ├── b01/
│   ├── b02/
│   ├── x/
│   └── y/
└── L2/
├── zarr.json
├── b01/
├── b02/
├── x/
└── y/

```

