[obligation==informative]

[[data-model]]
== GeoZarr Data Model

=== Scope and Purpose

The GeoZarr Data Model defines the abstract structure for representing geospatial and scientific gridded data within the GeoZarr framework.

The GeoZarr Data Model serves the following purposes:

* to **clarify the role of the Common Data Model (CDM)** as the structural foundation (recognising its suitability for Zarr as demonstrated by *xarray*, *GDAL*, and *nczarr*);
* to **extend the CDM** with additional geospatial capabilities required for cloud-native and tiled data representations, including *affine transformations* and *multiscale overviews*;
* to **ensure compatibility** with established data models and conventions such as *netCDF*, *CF*, *GDAL*, and *GeoTIFF*.


=== Conceptual Basis

The GeoZarr Data Model adopts and extends the **Unidata Common Data Model (CDM)** as its conceptual foundation.
The CDM defines a hierarchy of *groups*, *variables*, *dimensions*, and *attributes* that together describe the logical organisation of scientific data.

GeoZarr reuses these constructs and introduces an additional layer of **GeoZarr Extensions** that provide explicit geospatial semantics and support for cloud-native scalability:
    ** *Affine transformations* defining spatial reference through linear mapping between array indices and real-world coordinates;
    ** *Overviews* enabling multiscale representations and efficient visualization of large datasets.

=== Format Independence

Although the model was defined to support encoding in **Zarr**, it remains **format-agnostic** at the conceptual level.
Implementations may serialise the same GeoZarr Data Model structure into other compatible encodings, such as NetCDF or alternative object-based formats, provided they preserve the semantics and conformance requirements defined herein.

This separation between **conceptual model** and **physical encoding** ensures that GeoZarr can evolve alongside emerging storage technologies while maintaining interoperability with existing CDM- and CF-based infrastructures.

=== Conceptual Layers

The GeoZarr Data Model is organised into two conceptual layers:

1. the **Common Data Model (CDM)** – structural foundation for multidimensional data;
2. the **GeoZarr Extensions** – additional constructs for geospatial semantics and multiscale representations.


==== Common Data Model (CDM)

The **Unidata Common Data Model (CDM)** defines the logical structure of scientific datasets through a hierarchy of **Groups**, **Variables**, **Dimensions**, and **Attributes**.
It provides the foundation upon which GeoZarr and many existing libraries (such as *xarray*, *GDAL*, and *nczarr*) operate.

[plantuml, target="cdm_structure_overview", format=svg]
----
@startuml
class Group {
}

class Variable {
}

class Dimension {
}

class Attribute {
}

class DataArray {
}

class CoordinateVariable {
}

class Subgroup {
}

Group "1" *-- "0..*" Variable
Group "1" *-- "0..*" Dimension
Group "1" *-- "0..*" Attribute
Group "1" *-- "0..*" Subgroup
Variable "1" *-- "1" DataArray
Variable <|-- CoordinateVariable

@enduml
----


* A **Group** is a container that may include variables, dimensions, attributes, and subgroups.
* A **Variable** represents a multidimensional array associated with one or more dimensions and attributes.
* A **Dimension** defines an index axis used to organise data within variables.
* An **Attribute** holds descriptive metadata for groups or variables.
* A **Coordinate Variables**  supplies coordinate values along dimensions, establishing spatial or temporal context.
* A **Data Array**  represents observed or simulated phenomena, associated with dimensions and coordinate variables.

This structure enables consistent representation of scientific data independently of storage format, providing the base semantic framework for all GeoZarr encodings.


==== GeoZarr Extensions

GeoZarr extends the CDM with additional geospatial constructs required for cloud-native applications:

* **Affine transformations** — define the mapping between array indices and real-world coordinates using linear coefficients.
  This enables compact georeferencing for regularly gridded data.
* **Multiscale overviews** — represent downsampled versions of variables for efficient visualisation and scalable access.
  Overviews are structured as subordinate variable groups sharing the same coordinate system.

All extensions remain aligned with the CDM hierarchy and are encoded using the same core constructs (groups, variables, and attributes).
Together, they provide the minimal geospatial extensions necessary for efficient, standards-based representation of Earth observation and scientific data in cloud environments.


[plantuml, target="geozarr_extension_overview", format=svg]
----
@startuml
skinparam classAttributeIconSize 0
skinparam linetype ortho
skinparam packageStyle rectangle
skinparam backgroundColor #FFFFFF
title GeoZarr Extensions – Geospatial Enhancements

package "Common Data Model (CDM)" {
  class Group
  class Variable
  class Dimension
  class Attribute
}

package "GeoZarr Extensions" {
  class AffineTransform
  class Overview
}

Variable --> AffineTransform : georeference
Group --> Overview : provides
Variable --> Overview : provides

@enduml
----


// include::clause_7_part_overviews.adoc[]


===  Interoperability with Other Frameworks

The Common Data Model (CDM), with its flexible hierarchy of groups, variables, dimensions, and attributes allows direct representation of metadata constructs used across multiple scientific and geospatial standards.

This design enables the CDM—and therefore GeoZarr—to act as a *host model* for conventions and metadata originating from other frameworks, while preserving their semantics within a unified structure.

* **netCDF and the Enhanced Data Model** –
The netCDF Enhanced Data Model and the CDM share common origins and are conceptually aligned.
Both organise data into variables, dimensions, and attributes.
As a result, most netCDF datasets can be represented as CDM hierarchies without loss of structure or metadata.
Conversely, GeoZarr datasets that follow the CDM pattern can be serialised as valid netCDF encodings.

* **CF Conventions** –
The CF data model is encoding independent but conceptually compatible with the CDM.
CF metadata constructs—such as coordinate and auxiliary coordinate variables, standard names, units, and grid mappings—map directly onto CDM variables and attributes.
This allows GeoZarr datasets to incorporate CF semantics naturally, achieving partial or full CF compliance without modifying the underlying data model.

* **GDAL Metadata and Geotransform** –
GDAL expresses georeferencing through affine transformation coefficients and projection information.
These map directly to GeoZarr extension attributes (for affine transforms and CRS) stored as CDM attributes.
GDAL domain metadata can likewise be represented as CDM attributes within groups or variables, maintaining equivalence between GDAL and GeoZarr geospatial metadata.

* **GeoTIFF Tags and Metadata** –
GeoTIFF georeferencing information, including coordinate reference system definitions, tie points, and pixel scale, correspond closely to the affine transform and CRS constructs in the GeoZarr Extensions.
These elements can be represented as attributes within CDM-compliant groups and variables, ensuring semantic consistency between file-based and cloud-native representations.

Through these mappings, the CDM acts as a **common semantic framework** that integrates metadata from diverse geospatial standards.
This interoperability ensures that GeoZarr can serve as both a native storage model and a bridge between existing ecosystems such as netCDF/CF, GDAL, and GeoTIFF.

[NOTE]
====
GeoZarr does **not** define the mappings to CDM for metadata from existing conventions or formats such as CF, netCDF, GDAL, or GeoTIFF.
These mappings are already established and maintained by widely used libraries and implementations, including *xarray*, *netCDF-Java*, *GDAL*, etc. The role of GeoZarr is to provide a **data model and encoding framework**, not to redefine or replicate existing translation logic between metadata standards.

Accordingly, the **GeoZarr encoding specification** will only prescribe additional rules where a specific encoding behaviour in **Zarr** is required for interoperability or conformance.
====

==== Metadata and Discovery Integration

STAC compatibility enables integration with catalogue services for discovery and indexing. Datasets can expose STAC-compliant metadata alongside core metadata, supporting federated search and filtering via STAC APIs.

This approach enables seamless integration into modern data catalogues and platforms that support EO discovery standards.

==== Tool and Ecosystem Support

The Unified Data Model facilitates interoperability with tools and libraries across the following domains:

- *Scientific computing*: NetCDF-based libraries (e.g., xarray, netCDF4), Zarr-compatible clients.
- *Geospatial processing*: GDAL, rasterio, QGIS (via Zarr driver extensions or translations).
- *Cloud-native infrastructure*: support for parallel access, chunked storage, and hierarchical grouping compatible with object storage.

Tooling support is expected to grow via standard-conformant implementations, easing adoption across domains and infrastructures.
